# prompt: 使用纯前端技术实现一个俄罗斯方块游戏
中文回答，字数不多与于1000个字，思考如何在 5 步骤内完成这个项目的demo？

# answer: 
 ## 使用纯前端技术实现俄罗斯方块游戏 Demo (5 步骤)

这个 Demo 旨在快速实现一个基本功能的俄罗斯方块游戏，重点在于核心逻辑和 UI 的搭建。

**技术栈:** HTML, CSS, JavaScript (ES6+)

**步骤：**

**1. 搭建基础 HTML 结构和 CSS 样式 (1 小时)**

*   **HTML:**  创建一个包含游戏区域 (一个大的表格)，控制按钮 (开始、暂停、旋转、左右移动) 和得分显示区域的 HTML 结构。
*   **CSS:**  定义游戏区域的样式，包括格子大小、边框、颜色等。  定义按钮的样式，使其美观易用。  使用 CSS 布局控制游戏区域的排列。
*   **示例 HTML:**

```html
<!DOCTYPE html>
<html>
<head>
  <title>俄罗斯方块</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <h1>俄罗斯方块</h1>
  <div id="game-container"></div>
  <div id="controls">
    <button id="start-button">开始</button>
    <button id="pause-button">暂停</button>
    <button id="rotate-button">旋转</button>
    <button id="left-button">左移</button>
    <button id="right-button">右移</button>
    <div id="score">得分: 0</div>
  </div>
  <script src="script.js"></script>
</body>
</html>
```

*   **示例 CSS (style.css):**

```css
#game-container {
  width: 240px; /* 游戏区域宽度 */
  height: 400px; /* 游戏区域高度 */
  border: 1px solid black;
  display: grid;
}

#game-container > div {
  width: 20px; /* 格子宽度 */
  height: 20px; /* 格子高度 */
  border: 1px solid gray;
}

#controls {
  margin-top: 10px;
}
```

**2. 实现游戏逻辑核心：方块生成、下落、碰撞检测 (3 小时)**

*   **方块数据结构:**  使用数组表示每个方块的形状 (例如，一个 I 型方块可以用一个 4x1 的数组表示)。
*   **方块生成:**  随机生成一个方块，并将其放置在游戏区域的顶部。
*   **下落逻辑:**  每隔一段时间，将方块向下移动一个格子。
*   **碰撞检测:**  检测方块是否与游戏区域的边界或已有的方块发生碰撞。
*   **示例 JavaScript (script.js - 核心逻辑):**

```javascript
// 方块形状定义 (示例)
const blocks = [
  [[1, 1, 1, 1]], // I 型
  [[1, 1], [1, 1]]  // O 型
];

let currentBlock = null;
let gameContainer = document.getElementById('game-container');
let scoreElement = document.getElementById('score');

function generateBlock() {
  // 随机选择一个方块形状
  const randomIndex = Math.floor(Math.random() * blocks.length);
  currentBlock = {
    shape: blocks[randomIndex],
    x: Math.floor(gameContainer.offsetWidth / 2 - blocks[randomIndex][0].length / 2), // 初始 x 坐标
    y: 0
  };
}

function moveDown() {
  currentBlock.y++;
  // 碰撞检测...
}

// ... (其他函数：初始化游戏，更新 UI，处理用户输入)
```

**3.  实现用户输入和方块控制 (2 小时)**

*   **事件监听:**  为控制按钮添加事件监听器，响应用户点击。
*   **移动方块:**  根据用户点击按钮的指令，控制方块的左右移动和旋转。
*   **实现旋转逻辑:**  使用坐标变换 (例如，旋转矩阵) 实现方块的旋转。
*   **示例 JavaScript (script.js - 用户输入):**

```javascript
// ... (之前的代码)

document.getElementById('start-button').addEventListener('click', startGame);
document.getElementById('pause-button').addEventListener('click', pauseGame);
document.getElementById('rotate-button').addEventListener('click', rotateBlock);
document.getElementById('left-button').addEventListener('click', moveBlockLeft);
document.getElementById('right-button').addEventListener('click', moveBlockRight);

function startGame() {
  generateBlock();
  // ... (其他初始化代码)
}

function rotateBlock() {
  // ... (旋转逻辑)
}

function moveBlockLeft() {
  if (canMoveLeft()) {
    currentBlock.x--;
  }
}

function moveBlockRight() {
  if (canMoveRight()) {
    currentBlock.x++;
  }
}
```

**4.  实现游戏区域的渲染和更新 (2 小时)**

*   **遍历游戏区域:**  使用 JavaScript 遍历游戏区域的每个格子。
*   **根据方块位置渲染:**  根据当前方块的位置，在对应的格子中绘制方块的形状。
*   **清除已完成的行:**  检测游戏区域中是否有一整行已完成，并清除该行。
*   **示例 JavaScript (script.js - 渲染):**

```javascript
function render() {
  // 清空游戏区域
  gameContainer.innerHTML = '';

  // 渲染当前方块
  for (let i = 0; i < currentBlock.shape.length; i++) {
    for (let j = 0; j < currentBlock.shape[i].length; j++) {
      if (currentBlock.shape[i][j] === 1) {
        const cell = document.createElement('div');
        cell.style.left = currentBlock.x * 20 + 'px';
        cell.style.top = currentBlock.y * 20 + 'px';
        gameContainer.appendChild(cell);
      }
    }
  }
}

// ... (在 moveDown() 和其他函数中调用 render())
```

**5.  添加游戏结束逻辑和得分系统 (2 小时)**

*   **游戏结束条件:**  检测当前方块是否超出游戏区域的顶部。
*   **得分系统:**  根据清除的行数计算得分。
*   **UI 更新:**  更新得分显示区域。
*   **示例 JavaScript (script.js - 游戏结束和得分):**

```javascript
function checkGameOver() {
  // ... (检测是否超出游戏区域顶部)
  if (gameOver) {
    // ... (游戏结束处理)
  }
}

function calculateScore() {
  // ... (计算得分)
  score = score + clearedLines * 100;
  scoreElement.textContent = '得分: ' + score;
}

// ... (在 moveDown() 和 checkGameOver() 中调用 calculateScore())
```

**总结:**

这个 Demo 提供了俄罗斯方块游戏的基本框架。  你可以根据需要添加更多功能，例如：

*   难度级别调整
*   音效
*   更好的 UI 设计
*   更多游戏技巧 (例如，消除连击)

这个 5 步骤的分解，可以帮助你快速入门，并逐步构建一个完整的俄罗斯方块游戏。  记住，代码需要不断调试和优化，才能获得更好的游戏体验。
